(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),c=a.n(l),o=a(3),i=a(18),s=a.n(i),u=a(27),m=a(23),E=a(91),f=a.n(E),d=a(90),p=a.n(d),h=a(155),b=a(138),g=a(153),O=a(145),j=a(146),v=a(154),_=a(122),y=a(94),x=a.n(y),C=a(143),A=a(140),R=a(93),w=a.n(R),k=a(142),S=a(134),P=a(156),T=a(136),I=a(152),N=a(148),L=a(158),U=a(160),V=a(159),D=a(130),G=a(137),B=r.a.createContext([{},function(){}]),H={};function W(e){var t=Object(n.useState)(H),a=Object(o.a)(t,2),l=a[0],c=a[1];return r.a.createElement(B.Provider,{value:[l,c]},e.children)}var z=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),E=Object(o.a)(i,2),f=E[0],d=E[1],p=Object(n.useState)(!1),h=Object(o.a)(p,2),b=h[0],j=h[1],v=Object(n.useState)(""),_=Object(o.a)(v,2),y=_[0],x=_[1],C=Object(n.useState)(""),R=Object(o.a)(C,2),w=R[0],k=R[1],S=Object(n.useState)(""),P=Object(o.a)(S,2),T=P[0],I=P[1],H=Object(n.useState)(""),W=Object(o.a)(H,2),z=W[0],F=W[1],J=Object(n.useState)(""),M=Object(o.a)(J,2),Y=M[0],q=M[1],K=Object(n.useContext)(B),Q=Object(o.a)(K,2),X=(Q[0],Q[1]);return r.a.createElement("div",null,r.a.createElement(N.a,{label:"Sign Up",variant:"outlined",sx:{borderColor:"white",color:"white"},onClick:function(){return j(!0)}}),r.a.createElement(L.a,{open:b,onClose:function(){return j(!1)},fullWidth:!0},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),c(!0),d("");var a,n="Something went wrong, please try again.";a="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?"http://104.248.194.185:4000/signup":"http://localhost:4000/signup",fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:y,lastName:T,nameDisplayed:w,username:z,password:Y})}).then(function(){var t=Object(m.a)(s.a.mark(function t(a){var r,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!1),a.ok){t.next=20;break}if(400!==a.status){t.next=6;break}d("Please fill in all fields correctly."),t.next=18;break;case 6:if(401!==a.status){t.next=10;break}d("Invalid email and password combination."),t.next=18;break;case 10:if(500!==a.status){t.next=17;break}return t.next=13,a.json();case 13:(r=t.sent).message?d(r.message):d(n),t.next=18;break;case 17:d(n);case 18:t.next=25;break;case 20:return t.next=22,a.json();case 22:l=t.sent,X(function(e){return Object(u.a)({},e,{token:l.token})}),e.openSuccessAlertHandler("Welcome ".concat(l.username,"!"));case 25:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){c(!1),d(n)})}},r.a.createElement(D.a,null,"Sign Up"),r.a.createElement(V.a,null,r.a.createElement(g.a,null,f&&r.a.createElement(A.a,{severity:"error"},f),r.a.createElement("div",null,r.a.createElement(G.a,{id:"firstName",type:"text",label:"First Name",variant:"outlined",margin:"dense",value:y,onChange:function(e){return x(e.target.value)},fullWidth:!0})),r.a.createElement("div",null,r.a.createElement(G.a,{id:"lastName",type:"text",label:"Last Name",variant:"outlined",margin:"dense",value:T,onChange:function(e){return I(e.target.value)},fullWidth:!0})),r.a.createElement("div",null,r.a.createElement(G.a,{id:"username",type:"text",label:"Username",variant:"outlined",margin:"dense",value:w,onChange:function(e){return k(e.target.value)},fullWidth:!0})),r.a.createElement("div",null,r.a.createElement(G.a,{id:"email",type:"email",label:"Email",variant:"outlined",margin:"dense",value:z,onChange:function(e){return F(e.target.value)},fullWidth:!0})),r.a.createElement("div",null,r.a.createElement(G.a,{id:"password",type:"password",label:"Password",variant:"outlined",margin:"dense",value:Y,onChange:function(e){return q(e.target.value)},fullWidth:!0})))),r.a.createElement(U.a,null,r.a.createElement(O.a,{onClick:function(){return j(!1)}},"Cancel"),r.a.createElement(O.a,{type:"submit",disabled:l},l?"Signing Up...":"Sign Up")))))};var F=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),E=Object(o.a)(i,2),f=E[0],d=E[1],p=Object(n.useState)(!1),h=Object(o.a)(p,2),b=h[0],j=h[1],v=Object(n.useState)(""),_=Object(o.a)(v,2),y=_[0],x=_[1],C=Object(n.useState)(""),R=Object(o.a)(C,2),w=R[0],k=R[1],S=Object(n.useContext)(B),P=Object(o.a)(S,2),T=(P[0],P[1]);return r.a.createElement("div",null,r.a.createElement(N.a,{label:"Sign In",variant:"outlined",sx:{borderColor:"white",color:"white"},onClick:function(){return j(!0)}}),r.a.createElement(L.a,{open:b,onClose:function(){return j(!1)},fullWidth:!0},r.a.createElement("form",{onSubmit:function(t){var a;t.preventDefault(),c(!0),d(""),a="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?"http://104.248.194.185:4000/login":"http://localhost:4000/login",fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:w})}).then(function(){var t=Object(m.a)(s.a.mark(function t(a){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!1),a.ok){t.next=5;break}400===a.status?d("Please fill in all fields correcly."):401===a.status?d("Invalid email and password combination."):d("Something went wrong, please try again."),t.next=10;break;case 5:return t.next=7,a.json();case 7:n=t.sent,T(function(e){return Object(u.a)({},e,{token:n.token})}),e.openSuccessAlertHandler("Welcome back ".concat(n.username,"!"));case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){c(!1),d("Something went wrong, please try again.")})}},r.a.createElement(D.a,null,"Sign In"),r.a.createElement(V.a,null,r.a.createElement(g.a,null,f&&r.a.createElement(A.a,{severity:"error"},f),r.a.createElement("div",null,r.a.createElement(G.a,{id:"username",type:"text",label:"Email",variant:"outlined",margin:"dense",value:y,onChange:function(e){return x(e.target.value)},fullWidth:!0})),r.a.createElement("div",null,r.a.createElement(G.a,{id:"password",type:"password",label:"Password",variant:"outlined",margin:"dense",value:w,onChange:function(e){return k(e.target.value)},fullWidth:!0})))),r.a.createElement(U.a,null,r.a.createElement(O.a,{onClick:function(){return j(!1)}},"Cancel"),r.a.createElement(O.a,{type:"submit",disabled:l},l?"Signing In...":"Sign In")))))},J=a(92),M=a.n(J);var Y=function(e){var t,a=Object(n.useContext)(B),l=Object(o.a)(a,2),c=l[0],i=l[1];return t="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?"http://104.248.194.185:4000/logout":"http://localhost:4000/logout",r.a.createElement("div",null,r.a.createElement(C.a,{key:"center",onClick:function(){fetch(t,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}}).then(function(){var t=Object(m.a)(s.a.mark(function t(a){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=c.details.nameDisplayed,i(function(e){return Object(u.a)({},e,{details:void 0,token:null})}),window.localStorage.setItem("logout",Date.now()),e.openInfoAlertHandler("See you soon ".concat(n,"!"));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},r.a.createElement(v.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit"},r.a.createElement(M.a,null)),r.a.createElement(I.a,{textAlign:"center"},"Logout")))},q=r.a.forwardRef(function(e,t){return r.a.createElement(A.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))});var K=function(e){var t,a,l=Object(n.useContext)(B),c=Object(o.a)(l,2),i=c[0],E=c[1],d=Object(n.useState)(null),y=Object(o.a)(d,2),A=y[0],R=y[1],N=Object(n.useState)(null),L=Object(o.a)(N,2),U=L[0],V=L[1],D=Object(n.useState)(!1),G=Object(o.a)(D,2),H=G[0],W=G[1],J=Object(n.useState)(""),M=Object(o.a)(J,2),K=M[0],Q=M[1],X=Object(n.useState)(!1),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(""),ae=Object(o.a)(te,2),ne=ae[0],re=ae[1];"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?(t="http://104.248.194.185:4000/refreshToken",a="http://104.248.194.185:4000/me"):(t="http://localhost:4000/refreshToken",a="http://localhost:4000/me");var le=Object(n.useCallback)(function(){fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=7;break}return e.next=3,t.json();case 3:a=e.sent,E(function(e){return Object(u.a)({},e,{token:a.newToken})}),e.next=8;break;case 7:E(function(e){return Object(u.a)({},e,{token:null})});case 8:setTimeout(le,3e5);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},[E]),ce=Object(n.useCallback)(function(){fetch(a,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i.token)}}).then(function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=7;break}return e.next=3,t.json();case 3:a=e.sent,E(function(e){return Object(u.a)({},e,{details:a})}),e.next=8;break;case 7:401===t.status?console.log("no user details available."):E(function(e){return Object(u.a)({},e,{details:null})});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},[E,i.token]);Object(n.useEffect)(function(){le()},[le]),Object(n.useEffect)(function(){i.details||ce()},[ce,i.details]),Object(n.useCallback)(function(e){"logout"===e.key&&window.location.reload()},[]);var oe=function(){R(null)},ie=function(){V(null)};function se(){oe(),e.allArticlesHandler()}function ue(){oe(),e.myArticlesHandler()}function me(){oe(),e.myVotesHandler()}function Ee(e){Q(e),W(!0)}function fe(e){re(e),ee(!0)}var de=function(e,t){"clickaway"!==t&&(W(!1),ee(!1))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{position:"fixed"},r.a.createElement(j.a,{maxWidth:"xl"},r.a.createElement(P.a,{disableGutters:!0},r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{sx:{display:{xs:"none",md:"flex"},mr:1}}),r.a.createElement(I.a,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"}},"VOTE THE NEWS"))},null),r.a.createElement(function(){return r.a.createElement(g.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}},r.a.createElement(O.a,{key:"allArticles",onClick:se,sx:{my:2,color:"white",display:"block"}},"All Articles"),r.a.createElement(O.a,{key:"myArticles",onClick:ue,sx:{my:2,color:"white",display:"block"}},"My Articles"),r.a.createElement(O.a,{key:"myVotes",onClick:me,sx:{my:2,color:"white",display:"block"}},"My Votes"))},null),r.a.createElement(g.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}}},r.a.createElement(v.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){R(e.currentTarget)},color:"inherit"},r.a.createElement(x.a,null)),r.a.createElement(_.a,{id:"menu-appbar",anchorEl:A,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(A),onClose:oe,sx:{display:{xs:"block",md:"none"}}},r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{key:"allArticles",onClick:se},r.a.createElement(I.a,{textAlign:"center"},"All Articles")),r.a.createElement(C.a,{key:"myArticles",onClick:ue},r.a.createElement(I.a,{textAlign:"center"},"My Articles")),r.a.createElement(C.a,{key:"myVotes",onClick:me},r.a.createElement(I.a,{textAlign:"center"},"My Votes")))},null))),r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{sx:{display:{xs:"flex",md:"none"},mr:1}}),r.a.createElement(I.a,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"}},"VTN"))},null),(null===i.token||!i.token)&&r.a.createElement(function(){return r.a.createElement(S.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1},r.a.createElement(z,{openSuccessAlertHandler:fe}),r.a.createElement(F,{openSuccessAlertHandler:fe}))},null),i.token&&r.a.createElement(g.a,{sx:{flexGrow:0}},r.a.createElement(T.a,{title:"Open settings"},r.a.createElement(v.a,{onClick:function(e){V(e.currentTarget)},sx:{p:0},color:"inherit"},r.a.createElement(b.a,{badgeContent:17,color:"error"},r.a.createElement(f.a,{fontSize:"large"})))),r.a.createElement(_.a,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:U,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(U),onClose:ie},r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{key:"notifications",onClick:ie},r.a.createElement(v.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit"},r.a.createElement(b.a,{badgeContent:17,color:"error"},r.a.createElement(w.a,null))),r.a.createElement(I.a,{textAlign:"center"},"Notifications")),r.a.createElement(C.a,{key:"profile",onClick:ie},r.a.createElement(v.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit"},r.a.createElement(f.a,null)),r.a.createElement(I.a,{textAlign:"center"},"Profile")),r.a.createElement(Y,{openInfoAlertHandler:Ee}))},null)))))),r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{open:H,autoHideDuration:6e3,onClose:de},r.a.createElement(q,{onClose:de,severity:"info",sx:{width:"100%"}},K)),r.a.createElement(k.a,{open:$,autoHideDuration:6e3,onClose:de},r.a.createElement(q,{onClose:de,severity:"success",sx:{width:"100%"}},ne)))},null))},Q=a(96),X=a.n(Q),Z=a(44),$=a(117),ee=a.n($),te=a(151),ae=a(118),ne=a.n(ae),re=a(161),le=a(163),ce=a(162),oe=a(135),ie=a(95),se=a.n(ie),ue=a(149);var me=function(e){var t,a=Object(n.useContext)(B),l=Object(o.a)(a,2),c=l[0];return l[1],t="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?"http://104.248.194.185:4000/"+"".concat(e.articleInfo._id,"/vote"):"http://localhost:4000/"+"".concat(e.articleInfo._id,"/vote"),r.a.createElement(re.a,null,r.a.createElement(g.a,{display:"flex",justifyContent:"flex-start"},r.a.createElement(O.a,{size:"small",sx:{textTransform:"none",padding:"0",justifyContent:"flex-start",color:"rgba(0, 0, 0, 0.6)"}},e.articleInfo.author.nameDisplayed)),r.a.createElement(I.a,{color:"text.secondary",variant:"body2",align:"left",margin:0},e.articleInfo.postTime),r.a.createElement(ue.a,{href:e.articleInfo.url,underline:"none",target:"_blank",rel:"noopener"},r.a.createElement(ce.a,{component:"img",alt:"green iguana",height:"140",image:e.articleInfo.linkPreview.img}),r.a.createElement(le.a,null,r.a.createElement(I.a,{variant:"h6",component:"div",color:"text.primary",align:"left",lineHeight:1.4,marginBottom:1},e.articleInfo.linkPreview.title),r.a.createElement(I.a,{gutterBottom:!0,variant:"body2",color:"text.secondary",align:"left",lineHeight:1.2},e.articleInfo.linkPreview.description),r.a.createElement(I.a,{variant:"overline",color:"text.secondary",align:"right",lineHeight:1},e.articleInfo.linkPreview.domain))),r.a.createElement(oe.a,{variant:"middle"}),r.a.createElement(S.a,{direction:"row",justifyContent:"space-around",alignItems:"center",spacing:0,marginY:.5},r.a.createElement(N.a,{variant:"outlined",icon:r.a.createElement(se.a,null),label:"+Vote",onClick:function(){fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}}).then(function(e){e.ok&&console.log("upvoted")}).catch(function(e){console.log(e)})}}),r.a.createElement(I.a,{color:"text.secondary",variant:"body2"},e.articleInfo.numUpVotes,0===e.articleInfo.numUpVotes||1===e.articleInfo.numUpVotes?r.a.createElement(r.a.Fragment,null," vote"):r.a.createElement(r.a.Fragment,null," votes"))))},Ee=a(150);var fe=function(){return n.createElement(re.a,null,n.createElement(g.a,{display:"flex",justifyContent:"flex-start"},n.createElement(Ee.a,{animation:"wave",height:20,width:"20%",style:{marginBottom:6}})),n.createElement(Ee.a,{animation:"wave",height:20,width:"40%",style:{marginBottom:6}}),n.createElement(Ee.a,{sx:{height:150},animation:"wave",variant:"rectangular"}),n.createElement(le.a,null,n.createElement(Ee.a,{animation:"wave",height:30,width:"100%",style:{marginBottom:6}}),n.createElement(Ee.a,{animation:"wave",height:30,width:"40%",style:{marginBottom:6}}),n.createElement(Ee.a,{animation:"wave",height:20,width:"100%",style:{marginBottom:6}}),n.createElement(Ee.a,{animation:"wave",height:20,width:"95%",style:{marginBottom:6}}),n.createElement(g.a,{display:"flex",alignItems:"center",justifyContent:"center"},n.createElement(Ee.a,{animation:"wave",height:20,width:"25%",style:{marginBottom:6}}))),n.createElement(oe.a,{variant:"middle"}),n.createElement(S.a,{direction:"row",justifyContent:"space-around",alignItems:"center",spacing:0,marginY:.5},n.createElement(Ee.a,{animation:"wave",height:40,width:"15%",style:{marginBottom:6}}),n.createElement(Ee.a,{animation:"wave",height:20,width:"10%",style:{marginBottom:6}})))},de=r.a.forwardRef(function(e,t){return r.a.createElement(A.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))});var pe=function(){var e=Object(n.useContext)(B),t=Object(o.a)(e,2),a=t[0],l=(t[1],Object(n.useState)("")),c=Object(o.a)(l,2),i=c[0],u=c[1],E=Object(n.useState)(!1),f=Object(o.a)(E,2),d=f[0],p=f[1],h=Object(n.useState)(""),b=Object(o.a)(h,2),g=b[0],j=b[1],_=Object(n.useState)({}),y=Object(o.a)(_,2),x=y[0],C=y[1],A=Object(n.useState)(!1),R=Object(o.a)(A,2),w=R[0],S=R[1],P=Object(n.useState)(!1),T=Object(o.a)(P,2),I=T[0],N=T[1];function L(){return(L=Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=function(e,t){"clickaway"!==t&&(N(!1),S(!1))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",marginTop:"80px"},onSubmit:function(e){var t;e.preventDefault(),p(!0),j(""),t="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?"http://104.248.194.185:4000/newarticlepost":"http://localhost:4000/newarticlepost",fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)},body:JSON.stringify({url:i})}).then(function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!1),e.next=3,t.json();case 3:a=e.sent,t.ok?(C(a),N(!0)):401===t.status?(console.log("Setting error to: ".concat(a.message)),j(a.message),S(!0)):(j("Something went wrong, please try again."),S(!0));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){p(!1),j("Something went wrong, please try again."),S(!0)})}},r.a.createElement(ee.a,{sx:{p:"10px"},"aria-label":"menu"}),r.a.createElement(Z.c,{sx:{ml:1,flex:1},placeholder:"Paste article's url here",inputProps:{"aria-label":"search google maps"},value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement(v.a,{sx:{p:"10px"},"aria-label":"search",onClick:function(){return L.apply(this,arguments)}},r.a.createElement(X.a,null)),r.a.createElement(O.a,{type:"submit",variant:"contained",disabled:d,endIcon:r.a.createElement(ne.a,null)},"Post")),d&&r.a.createElement(fe,null),0!==Object.keys(x).length&&r.a.createElement(me,{articleInfo:x}),r.a.createElement(k.a,{open:I,autoHideDuration:6e3,onClose:U},r.a.createElement(de,{onClose:U,severity:"success",sx:{width:"100%"}},"New article posted!")),r.a.createElement(k.a,{open:w,autoHideDuration:6e3,onClose:U},r.a.createElement(de,{onClose:U,severity:"error",sx:{width:"100%"}},g)))},he=a(13),be=a(157),ge=a(147),Oe=a(6),je=Object(Oe.a)(te.a)(function(e){var t=e.theme;return Object(u.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2,{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})}),ve=0,_e=0,ye=0;var xe=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),l=(a[0],a[1]),c=Object(n.useState)(!1),i=Object(o.a)(c,2),u=(i[0],i[1]),E=Object(n.useState)(!1),f=Object(o.a)(E,2),d=f[0],p=f[1],h=Object(n.useState)([]),b=Object(o.a)(h,2),O=b[0],j=b[1],v=Object(n.useState)(""),_=Object(o.a)(v,2),y=_[0],x=_[1],C=Object(n.useState)(!1),A=Object(o.a)(C,2),R=(A[0],A[1]),w=Object(n.useState)(0),k=Object(o.a)(w,2),S=(k[0],k[1],Object(n.useContext)(B)),P=Object(o.a)(S,2),T=P[0],I=(P[1],Object(n.useState)(null)),N=Object(o.a)(I,2),L=N[0],U=N[1],V=Object(n.useState)(!1),D=Object(o.a)(V,2),G=D[0],H=D[1],W=(Object(n.useRef)(),Object(n.useRef)(new IntersectionObserver(function(e){e[0].isIntersecting&&(ye++,console.log("observer triggered ".concat(ye)),H(!0))})));function z(t){var a;ve++,console.log("fetchArticlesArray called ".concat(ve)),console.log(y),p(!0),a="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL_LOCAL:"http://localhost:4000/",REACT_APP_SERVER_URL_DIGITAL_OCEAN:"http://104.248.194.185:4000/",REACT_APP_SERVER_PORT:"4000"}).REACT_APP_RUNNING_IN_DIGITAL_OCEAN?"http://104.248.194.185:4000/"+"".concat(e.pageDisplayed):"http://localhost:4000/"+"".concat(e.pageDisplayed),fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(T.token)},body:JSON.stringify({lastPostTime:t})}).then(function(){var e=Object(m.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=6;break}return e.next=3,t.json();case 3:0!==(a=e.sent).length?(u(!0),j(function(e){return[].concat(Object(he.a)(e),Object(he.a)(a))}),n=a[a.length-1].postTime,console.log("newLastPostTime:",n),x(n)):(console.log("No more articles"),R(!0)),p(!1);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){u(!0),l(e)})}function F(e){return r.a.createElement(je,null,r.a.createElement(me,{articleInfo:e,key:e.id}))}return Object(n.useEffect)(function(){_e++,console.log("useEffect called ".concat(_e)),console.log("lastPostTime: ".concat(y)),z(y),console.log("lastPostTime: ".concat(y))},[]),Object(n.useEffect)(function(){console.log(y);var e=L,t=W.current;return e&&t.observe(e),function(){e&&t.unobserve(e)}},[L,y]),Object(n.useEffect)(function(){console.log("useEffect shouldFetch: ".concat(y)),G&&z(y)},[G,y]),r.a.createElement(g.a,{sx:{flexGrow:1}},console.log(y),r.a.createElement(ge.a,{container:!0,spacing:2},O.map(function(e,t){return t===O.length-1?r.a.createElement(ge.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,key:e._id+"".concat(t),ref:U},F(e)):r.a.createElement(ge.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,key:e._id+"".concat(t)},F(e))})),r.a.createElement("div",null,d&&r.a.createElement(g.a,{sx:{display:"flex",justifyContent:"center",marginTop:2}},r.a.createElement(be.a,null))))};a(119);var Ce=function(){var e=Object(n.useState)("allarticles"),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2);return i[0],i[1],r.a.createElement(r.a.Fragment,null,r.a.createElement(K,{allArticlesHandler:function(){l("allarticles")},myArticlesHandler:function(){l("myarticles")},myVotesHandler:function(){l("myvotes")}}),r.a.createElement(pe,null),r.a.createElement(xe,{pageDisplayed:a}))};c.a.render(r.a.createElement(W,null,r.a.createElement(Ce,null)),document.getElementById("root"))},170:function(e,t,a){e.exports=a(121)}},[[170,2,1]]]);
//# sourceMappingURL=main.f8f9c78d.chunk.js.map